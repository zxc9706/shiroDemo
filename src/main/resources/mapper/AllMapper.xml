<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zxc.demo.mapper.AllMapper">

    <select id="getTab" resultType="map">
        select * from zxc_tab
        where del_state = 0
    </select>

    <insert id="add" parameterType="map">
        insert into zxc_memo
        (memo_title,memo,customer_name,add_time,del_state)
        values
        (#{memo_title},#{memo},#{customer_name},NOW(),0)
    </insert>

    <select id="getMemos" parameterType="map" resultType="map">
        select id,memo_title,memo,customer_name,DATE_FORMAT(add_time,'%Y-%m-%d %H:%m:%s') as add_time
        from zxc_memo
        where customer_name = #{customer_name}
        and del_state = 0
        order by add_time desc
    </select>

    <update id="delMemo">
        update zxc_memo set
        del_state = 1
        where id = #{id}
    </update>

    <update id="editMemo">
        update zxc_memo set
        memo_title = #{memo_title},
        memo = #{memo}
        where id = #{id}
        and del_state = 0
    </update>

</mapper>